@using Application.ImageTools
@model Domain.ViewModels.User.EditUserViewModel
@{
    ViewData["Title"] = "ویرایش اطلاعات";

}


<section class="bg-profile d-table w-100 bg-primary" style="background: url('images/account/bg.png') center center;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="card public-profile border-0 rounded shadow" style="z-index: 1;">
                    <div class="card-body">
                        <div class="row align-items-center">
                            @if (Model.UserImage != null)
                            {
                                <div class="col-lg-2 col-md-3 text-md-start text-center">
                                    <img src="@PathExtensions.UserAvatarThumb@Model.UserImage" class="UserPanelPicture  avatar avatar-large rounded-circle shadow d-block mx-auto" alt="">
                                </div>

                                <!--end col-->
                            }
                            else
                            {
                                <div class="col-lg-2 col-md-3 text-md-start text-center">
                                    <img src="images/blog/user-Details.png" class="UserPanelPicture  avatar avatar-large img-fluid rounded-circle shadow d-block mx-auto" alt="">
                                </div>

                                <!--end col-->
                            }

                            <div class="col-lg-10 col-md-9">
                                <div class="row align-items-end">
                                    <div class="col-md-7 text-md-start text-center mt-4 mt-sm-0">
                                        <h3 class="title mb-0">@Model.UserName</h3>
                                        <small class="text-muted h6 me-2">@Model.Email.Substring(0, @Model.Email.IndexOf('@'))</small>
                                    </div><!--end col-->
                                </div><!--end row-->
                            </div><!--end col-->
                        </div><!--end row-->
                    </div>
                </div>
            </div><!--end col-->
        </div><!--end row-->
    </div><!--ed container-->
</section><!--end section-->
<!-- Hero End -->
<!-- Profile Start -->
<section class="section mt-60">
    <div class="container mt-lg-3">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-12 d-lg-block d-none">
                <div class="sidebar sticky-bar p-4 rounded shadow">

                    <div class="widget mt-4">
                        <ul class="list-unstyled sidebar-nav mb-0" id="navmenu-nav">
                            <li class="navbar-item account-menu px-0 ">
                                <a asp-controller="Account" asp-action="UserPanel" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="uil uil-dashboard"></i></span>
                                    <h6 class="mb-0 ms-2">پروفایل </h6>
                                </a>
                            </li>

                            <li class="navbar-item account-menu px-0 mt-2 ">
                                <a asp-controller="Follow" asp-action="Index" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="uil uil-users-alt"></i></span>
                                    <h6 class="mb-0 ms-2">کسانی را که دنبال می کنید </h6>
                                </a>
                            </li>

                            <li class="navbar-item account-menu px-0 mt-2 ">
                                <a asp-controller="Follow" asp-action="Followers" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="uil uil-file"></i></span>
                                    <h6 class="mb-0 ms-2">کسانی که شمارا دنبال می کنند</h6>
                                </a>
                            </li>
                            <li class="navbar-item account-menu px-0 mt-2 ">
                                <a asp-controller="Bookmark" asp-action="Index" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="bi bi-bookmark"></i></span>
                                    <h6 class="mb-0 ms-2"> بوکمارک ها </h6>
                                </a>
                            </li>
                            <li class="navbar-item account-menu px-0 mt-2 active">
                                <a asp-controller="Bookmark" asp-action="Index" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="bi bi-pen"></i></span>
                                    <h6 class="mb-0 ms-2"> ویرایش حساب</h6>
                                </a>
                            </li>
                            <li class="navbar-item account-menu px-0 mt-2">
                                <a asp-controller="Account" asp-action="Logout" class="navbar-link d-flex rounded shadow align-items-center py-2 px-4">
                                    <span class="h4 mb-0"><i class="uil uil-dashboard"></i></span>
                                    <h6 class="mb-0 ms-2">خروج </h6>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div><!--end col-->

            <div class="col-lg-8 col-12">
                <div class="card border-0 rounded shadow">
                    <div class="card-body">
                        <h5 class="text-md-start text-center">جزئیات :</h5>


                        <form asp-controller="Account" asp-action="EditUserInfo" method="post" enctype="multipart/form-data">
                            <div class="mt-3 text-md-start text-center d-sm-flex">
                            @if (Model.UserImage != null)
                            {
                                    <img src="@PathExtensions.UserAvatarThumb@Model.UserImage" class="avatar float-md-left avatar-medium rounded-circle shadow me-md-4" alt="">
                                }
                                else
                                {
                                 <img src="images/blog/user-Details.png" class="avatar float-md-left avatar-medium rounded-circle shadow me-md-4" alt="">
                                }

                            <div class="mt-md-4 mt-3 mt-sm-0">
                                    <a onclick="openInput()" id="btnChangeImg" href="javascript:void(0)" class="btn btn-primary mt-2">تغییر تصویر</a>
                            </div>

                             <input asp-for="Image" type="file" id="ChangeImg" class="d-none" />

                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">نام اصلی </label>
                                        <div class="form-icon position-relative">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user fea icon-sm icons"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                            <input asp-for="UserName" id="first" type="text" class="form-control ps-5" placeholder="نام :">
                                             <span asp-validation-for="UserName" class="text-danger"></span>
                                            </div>
                                    </div>
                                </div><!--end col-->
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label"> تلفن همراه : </label>
                                        <div class="form-icon position-relative">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-check fea icon-sm icons"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></svg>
                                            <input asp-for="phoneNumber" id="last" type="number" class="form-control ps-5" placeholder=" تلفن همراه :">
                                            <span asp-validation-for="phoneNumber" class="text-danger"></span>
                                            @if (Model.MobileActivated == false && Model.phoneNumber != null)
                                            {
                                            <span class="text-danger">لطفا شماره همراه خود را تایید کنید</span>
                                            }

                                            </div>
                                    </div>
                                </div><!--end col-->
                                <div class="col-lg-12">
                                    <div class="mb-3">
                                        <label class="form-label">بایو : </label>
                                        <div class="form-icon position-relative">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-circle fea icon-sm icons"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                                            <textarea asp-for="Bio" id="comments" rows="4" class="form-control ps-5" placeholder="توضیحات :"></textarea>
                                             <span asp-validation-for="Bio" class="text-danger"></span>

                                        </div>
                                    </div>
                                </div>
                            </div><!--end row-->
                            <div class="row">
                                <div class="col-sm-12">
                                    <input type="submit" id="submit" name="send" class="btn btn-primary" value="ذخیره تغییرات">
                                    @if (Model.phoneNumber != null && Model.MobileActivated==false)
                                    {
                                    <a class="btn btn-warning" asp-controller="Account" asp-action="VerifyPhone">تایید تلفن</a>
                                    }

                                </div><!--end col-->
                            </div><!--end row-->
                        </form><!--end form-->
                    </div>
                </div>

            </div><!--end col-->
        </div><!--end row-->
    </div><!--end container-->
</section><!--end section-->
<!-- تنظیمات پروفایل End -->

<script>
    function openInput() {
        document.getElementById("ChangeImg").click();;

    }
</script>